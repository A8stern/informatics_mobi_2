# Отчет по лабораторной работе: Перевод IPv4-адреса в двоичный формат с использованием bash

## Описание лабораторной работы

Цель лабораторной работы — научиться работать с аргументами командной строки, переменными, условными конструкциями, функциями и регулярными выражениями в bash, а также написать скрипт, переводящий IPv4-адрес из десятичного формата в двоичный.

## Используемые инструменты

- Операционная система: Ubuntu Linux
- Командный интерпретатор: bash
- Текстовый редактор: vim

---

## Шаг 1: Создание bash-скрипта

### Команда:
```bash
touch ipv4ToBinary.bash
```
**Объяснение команды:**
- `touch` — утилита для создания пустого файла. Здесь мы создаём файл `ipv4ToBinary.bash`, в котором будет храниться наш скрипт.

### Команда:
```bash
chmod +x ipv4ToBinary.bash
```
**Объяснение команды:**
- `chmod +x` — делает файл исполняемым, то есть позволяет запускать его как программу.

---

## Шаг 2: Содержимое скрипта `ipv4ToBinary.bash`

```bash
#!/bin/bash

decimal_to_binary() {
    local decimal=$1
    local binary=$(echo "obase=2; $decimal" | bc)

    while [ ${#binary} -lt 8 ]; do
        binary="0$binary"
    done

    echo "$binary"
}

if [ -z "$1" ]; then 
    echo "Not found any entered data, pls enter IPv4-adress"
    exit 1
fi

o1=$(echo "$1" | cut -d '.' -f 1)
o2=$(echo "$1" | cut -d '.' -f 2)
o3=$(echo "$1" | cut -d '.' -f 3)
o4=$(echo "$1" | cut -d '.' -f 4)

echo "$o1.$o2.$o3.$o4"

if ! [[ "$o1" =~ ^[0-9]+$ && "$o2" =~ ^[0-9]+$ && "$o3" =~ ^[0-9]+$ && "$o4" =~ ^[0-9]+$ ]]; then
    echo "Invalid IPv4 address"
    exit 1
fi

b1=$(decimal_to_binary "$o1")
b2=$(decimal_to_binary "$o2")
b3=$(decimal_to_binary "$o3")
b4=$(decimal_to_binary "$o4")

echo "$b1.$b2.$b3.$b4"
```

---

## Объяснение всех ключевых команд и блоков скрипта

```bash
#!/bin/bash
```
**Объяснение команды:**
- `#!` — шебанг, указывает, что данный скрипт должен исполняться с использованием `bash`.
- `/bin/bash` — путь к интерпретатору bash в системе.

```bash
decimal_to_binary() {
    local decimal=$1
    local binary=$(echo "obase=2; $decimal" | bc)
    
    while [ ${#binary} -lt 8 ]; do
        binary="0$binary"
    done

    echo "$binary"
}
```
**Объяснение блока:**
- `decimal_to_binary()` — функция для перевода десятичного числа в двоичное.
- `local decimal=$1` — принимает первый аргумент функции.
- `echo "obase=2; $decimal" | bc` — переводит десятичное число в двоичную систему при помощи калькулятора `bc`.
- `while [ ${#binary} -lt 8 ];` — цикл дополняет результат нулями слева, пока длина строки меньше 8 символов, чтобы каждый октет содержал ровно 8 бит.

```bash
if [ -z "$1" ]; then
  echo "Not found any entered data, pls enter IPv4-adress"
  exit 1
fi
```
**Объяснение блока:**
- `-z "$1"` — проверка: был ли передан хотя бы один аргумент.
- Если аргумента нет, скрипт выводит сообщение и завершает выполнение.

```bash
o1=$(echo "$1" | cut -d '.' -f 1)
```
**Объяснение команды:**
- `cut -d '.' -f 1` — разбивает строку по точке и извлекает первый октет IP-адреса.
- Остальные команды аналогично извлекают 2, 3 и 4 октеты.

```bash
echo "$o1.$o2.$o3.$o4"
```
**Объяснение команды:**
- Просто выводит разобранный IP-адрес для наглядности.

```bash
if ! [[ "$o1" =~ ^[0-9]+$ && "$o2" =~ ^[0-9]+$ && "$o3" =~ ^[0-9]+$ && "$o4" =~ ^[0-9]+$ ]]; then
  echo "Invalid IPv4 address"
  exit 1
fi
```
**Объяснение блока:**
- Проверка, что каждый из октетов — целое положительное число. Если хотя бы один из них не соответствует, скрипт сообщает об ошибке и завершает работу.

```bash
b1=$(decimal_to_binary "$o1")
```
**Объяснение команды:**
- Вызов функции `decimal_to_binary` для первого октета.
- Аналогично для оставшихся трех.

```bash
echo "$b1.$b2.$b3.$b4"
```
**Объяснение команды:**
- Выводит итоговый IP-адрес, преобразованный в двоичный формат, разделённый точками.

---

## Пример запуска скрипта

```bash
./ipv4ToBinary.bash 192.168.10.1
```
**Вывод:**
```bash
192.168.10.1
11000000.10101000.00001010.00000001
```

---

## Заключение

В результате выполнения лабораторной работы было:
- Реализовано разбиение строки и проверка с помощью регулярных выражений;
- Написана bash-функция для перевода чисел в двоичный формат с дополнением нулями;
- Создан и протестирован скрипт, успешно переводящий IPv4-адрес в двоичный вид.

Работа демонстрирует умения использовать bash как язык программирования для задач автоматизации и обработки данных.

